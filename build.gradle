plugins {
    id("java-library")
    id("maven-publish")
    id("com.jfrog.artifactory").version("4.21.0")
}

sourceCompatibility = 8
targetCompatibility = 8

group("net.gudenau.lib")
version("1.4.1")

repositories {
    mavenCentral()
}

dependencies {
    testImplementation("org.junit.jupiter:junit-jupiter:+")
}

java {
    withSourcesJar()
}

publishing {
    publications {
        maven(MavenPublication) {
            groupId(project.group)
            artifactId(project.name)
            version(project.version)

            from(components.java)
        }
    }

    repositories {
        mavenLocal()
    }
}

artifactory {
    publish {
        contextUrl = "https://auoeke.jfrog.io/artifactory"

        repository {
            repoKey = "maven"
            username = System.env["ARTIFACTORY_USERNAME"]
            password = System.env["ARTIFACTORY_PASSWORD"]
        }

        defaults {
            publications("maven")
        }
    }
}
